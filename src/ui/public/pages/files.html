<div class="files-container">
    <div class="files-toolbar">
        <div class="breadcrumbs" id="breadcrumbs">
            <span class="breadcrumb-item">My Files</span>
        </div>
        <div class="files-actions">
            <input type="file" id="file-input-hidden" style="display: none;" multiple>
            <button class="btn-secondary" id="btn-new-folder">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    <line x1="12" y1="11" x2="12" y2="17"></line>
                    <line x1="9" y1="14" x2="15" y2="14"></line>
                </svg>
                New Folder
            </button>
            <button class="btn-primary" id="btn-upload-file">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                Upload
            </button>
        </div>
    </div>

    <div class="files-content-area">
        <div id="files-loading" class="files-state">
            <div class="spinner"></div>
            <p>Loading your files...</p>
        </div>

        <div id="files-empty-state" class="files-state" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
                class="empty-icon">
                <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                <polyline points="13 2 13 9 20 9"></polyline>
            </svg>
            <p>No files yet</p>
            <button class="btn-text" onclick="document.getElementById('file-input-hidden').click()">Upload a
                file</button>
        </div>

        <div id="file-grid" class="file-grid">
            <!-- Files will be injected here -->
        </div>
    </div>

    <div id="context-menu" class="context-menu">
        <div class="context-menu-item" id="ctx-edit" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            Edit Document
        </div>
        <div class="context-menu-item" id="ctx-metadata">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            Edit Metadata
        </div>

        <div class="context-menu-item" id="ctx-share">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
            </svg>
            Share
        </div>
        <div class="context-menu-item" id="ctx-download">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Download
        </div>
        <div class="context-menu-item" id="ctx-move">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 17 4 12 9 7"></polyline>
                <path d="M20 18v-2a4 4 0 0 0-4-4H4"></path>
            </svg>
            Move to
        </div>
        <div class="context-menu-item" id="ctx-lock">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            Lock
        </div>
        <div class="context-menu-item" id="ctx-unlock" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>
            </svg>
            Unlock
        </div>
        <div class="context-menu-item delete" id="ctx-delete">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
            Delete
        </div>
    </div>

    <!-- Move Modal -->
    <div id="move-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Move Item</h3>
                <span class="close-modal" id="close-move-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Select destination folder:</p>
                <input type="text" id="move-search-input" placeholder="Search folders..." class="form-input"
                    style="width: 100%; margin-bottom: 15px;">
                <div id="move-results" class="move-results-list"
                    style="max-height: 300px; overflow-y: auto; border: 1px solid #333; border-radius: 4px; padding: 5px;">
                    <!-- Results injected here -->
                    <div class="move-result-item" data-id="root"
                        style="padding: 8px; cursor: pointer; border-bottom: 1px solid #333;">
                        <span>/ (Root)</span>
                    </div>
                </div>
                <div class="modal-actions"
                    style="margin-top: 15px; display: flex; justify-content: flex-end; gap: 10px;">
                    <button class="btn-secondary" id="btn-cancel-move">Cancel</button>
                    <button class="btn-primary" id="btn-confirm-move" disabled>Move Here</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Metadata Modal -->
    <div id="metadata-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Metadata</h3>
                <span class="close-modal" id="close-metadata-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="meta-name" style="display: block; margin-bottom: 5px;">Name</label>
                    <div style="display: flex; align-items: center;">
                        <input type="text" id="meta-name" class="form-input" style="flex: 1;" placeholder="File name">
                        <span id="meta-extension" style="margin-left: 5px; color: #888;"></span>
                    </div>
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="meta-caption" style="display: block; margin-bottom: 5px;">Caption</label>
                    <textarea id="meta-caption" class="form-input" style="width: 100%; height: 80px; resize: vertical;"
                        placeholder="Enter caption..."></textarea>
                </div>
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="meta-tags-input" style="display: block; margin-bottom: 5px;">Tags</label>
                    <div class="tags-container"
                        style="display: flex; flex-wrap: wrap; gap: 5px; border: 1px solid #444; padding: 5px; border-radius: 4px; min-height: 40px;">
                        <div id="meta-tags-list" style="display: contents;">
                            <!-- Tags injected here -->
                        </div>
                        <input type="text" id="meta-tags-input" placeholder="Add tag..."
                            style="border: none; background: transparent; color: #fff; flex: 1; min-width: 60px; outline: none;">
                    </div>
                    <small style="color: #888;">Press Enter to add tag</small>
                </div>
                <div class="modal-actions"
                    style="margin-top: 15px; display: flex; justify-content: flex-end; gap: 10px;">
                    <button class="btn-secondary" id="btn-cancel-metadata">Cancel</button>
                    <button class="btn-primary" id="btn-save-metadata">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share File</h3>
                <span class="close-modal" id="close-share-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="tabs" style="display: flex; gap: 10px; border-bottom: 1px solid #444; margin-bottom: 15px;">
                    <button class="tab-btn active" data-tab="share-user"
                        style="background: none; border: none; color: #fff; padding: 10px; cursor: pointer; border-bottom: 2px solid var(--primary-color);">User</button>
                    <button class="tab-btn" data-tab="share-link"
                        style="background: none; border: none; color: #888; padding: 10px; cursor: pointer;">Public
                        Link</button>
                </div>

                <div id="tab-share-user" class="tab-content">
                    <p>Share with user:</p>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <input type="email" id="share-email-input" placeholder="User email" class="form-input"
                            style="flex: 1;">
                        <button class="btn-primary" id="btn-add-share"
                            style="width: auto; min-width: 80px;">Share</button>
                    </div>

                    <h4>Shared with:</h4>
                    <div id="shared-users-list"
                        style="max-height: 200px; overflow-y: auto; border: 1px solid #333; border-radius: 4px; padding: 5px;">
                        <!-- Shared users injected here -->
                        <p style="padding: 10px; color: #888;">No users yet</p>
                    </div>
                </div>

                <div id="tab-share-link" class="tab-content" style="display: none;">
                    <p>Generate a public link to this file.</p>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">Expiration</label>
                        <select id="share-link-expiry" class="form-input" style="width: 100%;">
                            <option value="60">1 Hour</option>
                            <option value="1440">24 Hours</option>
                            <option value="10080">7 Days</option>
                            <option value="0">Never</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px;">Max Uses</label>
                        <select id="share-link-uses" class="form-input" style="width: 100%;">
                            <option value="0">Unlimited</option>
                            <option value="1">1 Time</option>
                            <option value="5">5 Times</option>
                            <option value="10">10 Times</option>
                        </select>
                    </div>

                    <button class="btn-primary" id="btn-generate-link"
                        style="width: 100%; margin-bottom: 15px;">Generate Link</button>

                    <div id="share-link-result" style="display: none;">
                        <label style="display: block; margin-bottom: 5px;">Your Link:</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="share-link-output" readonly class="form-input"
                                style="flex: 1; text-overflow: ellipsis;">
                            <button class="btn-secondary" id="btn-copy-link">Copy</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div id="video-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; background: #000;">
            <div class="modal-header">
                <h3 id="video-title">Playing Video</h3>
                <span class="close" id="close-video-modal">&times;</span>
            </div>
            <div class="modal-body" style="padding: 0; display: flex; justify-content: center;">
                <video id="video-player" controls preload="metadata" style="max-width: 100%; max-height: 80vh;">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>



    <!-- Lock File Modal -->
    <div id="lock-file-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>Lock File</h3>
                <span class="close-modal" id="close-lock-modal">&times;</span>
            </div>
            <div class="modal-body">
                <i class="fas fa-lock locked-icon-large"></i>
                <p>Set a password to lock this file. Any existing shares will still need this password.</p>
                <div class="form-group">
                    <label for="lock-password-input" class="form-label">Password</label>
                    <input type="password" id="lock-password-input" class="form-input" placeholder="Enter password">
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="btn-cancel-lock">Cancel</button>
                    <button class="btn-primary" id="btn-confirm-lock">Lock File</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Unlock File Modal -->
    <div id="unlock-file-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3 id="unlock-modal-title">Enter Password</h3>
                <span class="close-modal" id="close-unlock-modal">&times;</span>
            </div>
            <div class="modal-body">
                <i class="fas fa-unlock locked-icon-large" style="color: var(--primary-color);"></i>
                <p>This file is password protected.</p>
                <div class="form-group">
                    <label for="unlock-password-input" class="form-label">Password</label>
                    <input type="password" id="unlock-password-input" class="form-input" placeholder="Enter password">
                </div>
                <div class="modal-footer" style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="btn-primary" id="btn-confirm-unlock">Access</button>
                    <button class="btn-secondary" id="btn-cancel-unlock"
                        style="width: 100%; justify-content: center;">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Transfer Panel -->
    <div id="transfer-panel" class="transfer-panel collapsed" style="display: none;">
        <div class="transfer-header" id="transfer-toggle">
            <div class="transfer-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
                <span>Transfers</span>
            </div>
            <div class="transfer-controls">
                <span id="transfer-count" class="badge">0</span>
                <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
            </div>
        </div>
        <div class="transfer-list" id="transfer-list">
            <!-- Transfer Items will be injected here -->
        </div>
    </div>
    <!-- Bulk Action Bar -->
    <div id="bulk-action-bar" class="bulk-action-bar">
        <span class="selection-count" id="selection-count">0 Selected</span>
        <button class="bulk-action-btn" id="btn-bulk-move">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 17 4 12 9 7"></polyline>
                <path d="M20 18v-2a4 4 0 0 0-4-4H4"></path>
            </svg>
            Move
        </button>
        <button class="bulk-action-btn delete" id="btn-bulk-delete">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            Delete
        </button>
        <button class="bulk-action-btn" id="btn-bulk-cancel"
            style="margin-left: 10px; border-left: 1px solid rgba(255,255,255,0.1); padding-left: 15px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>

    <!-- Selection Box -->
    <div id="selection-box" class="selection-box"></div>
</div>